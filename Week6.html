<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Melanie Beebe">

<title>Week 6</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Week6_files/libs/clipboard/clipboard.min.js"></script>
<script src="Week6_files/libs/quarto-html/quarto.js"></script>
<script src="Week6_files/libs/quarto-html/popper.min.js"></script>
<script src="Week6_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Week6_files/libs/quarto-html/anchor.min.js"></script>
<link href="Week6_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Week6_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Week6_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Week6_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Week6_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 6</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Melanie Beebe </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="apply-family-of-functions" class="level1">
<h1>apply() family of functions</h1>
<section id="call-in-lahman-battting-data" class="level2">
<h2 class="anchored" data-anchor-id="call-in-lahman-battting-data">call in Lahman Battting data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#code in lecture but doesn't work</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Lahman)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>my_batting <span class="ot">&lt;-</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  Batting[, <span class="fu">c</span>(<span class="st">"playerID"</span>, <span class="st">"teamID"</span>, <span class="st">"G"</span>, <span class="st">"AB"</span>, <span class="st">"R"</span>, <span class="st">"H"</span>, <span class="st">"X2B"</span>, <span class="st">"X3B"</span>, <span class="st">"HR"</span>)] <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>my_batting</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 112,184 × 9
   playerID  teamID     G    AB     R     H   X2B   X3B    HR
   &lt;chr&gt;     &lt;fct&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1 abercda01 TRO        1     4     0     0     0     0     0
 2 addybo01  RC1       25   118    30    32     6     0     0
 3 allisar01 CL1       29   137    28    40     4     5     0
 4 allisdo01 WS3       27   133    28    44    10     2     2
 5 ansonca01 RC1       25   120    29    39    11     3     0
 6 armstbo01 FW1       12    49     9    11     2     1     0
 7 barkeal01 RC1        1     4     0     1     0     0     0
 8 barnero01 BS1       31   157    66    63    10     9     0
 9 barrebi01 FW1        1     5     1     1     1     0     0
10 barrofr01 BS1       18    86    13    13     2     1     0
# ℹ 112,174 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Lahman)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>my_batting <span class="ot">&lt;-</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  Batting <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (playerID, teamID, G, AB, R, H, X2B, X3B, HR) <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>my_batting</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 112,184 × 9
   playerID  teamID     G    AB     R     H   X2B   X3B    HR
   &lt;chr&gt;     &lt;fct&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1 abercda01 TRO        1     4     0     0     0     0     0
 2 addybo01  RC1       25   118    30    32     6     0     0
 3 allisar01 CL1       29   137    28    40     4     5     0
 4 allisdo01 WS3       27   133    28    44    10     2     2
 5 ansonca01 RC1       25   120    29    39    11     3     0
 6 armstbo01 FW1       12    49     9    11     2     1     0
 7 barkeal01 RC1        1     4     0     1     0     0     0
 8 barnero01 BS1       31   157    66    63    10     9     0
 9 barrebi01 FW1        1     5     1     1     1     0     0
10 barrofr01 BS1       18    86    13    13     2     1     0
# ℹ 112,174 more rows</code></pre>
</div>
</div>
</section>
<section id="use-apply" class="level2">
<h2 class="anchored" data-anchor-id="use-apply">use apply</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#NOTE the capital X</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(<span class="at">X =</span> my_batting, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">MARGIN =</span> <span class="dv">2</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">FUN =</span> summary, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       playerID    teamID      G           AB          R           H          
Length "112184"    "112184"    "112184"    "112184"    "112184"    "112184"   
Class  "character" "character" "character" "character" "character" "character"
Mode   "character" "character" "character" "character" "character" "character"
       X2B         X3B         HR         
Length "112184"    "112184"    "112184"   
Class  "character" "character" "character"
Mode   "character" "character" "character"</code></pre>
</div>
</div>
<p>Above is not useful because we have multiple types of data, so R coerces all into character. Instead, use as.numeric to get a meaningful summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>batting_summary <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="at">X =</span> my_batting <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)), </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">MARGIN =</span> <span class="dv">2</span>, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">FUN =</span> summary, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>batting_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                G       AB         R       H     X2B       X3B        HR
Min.      1.00000   0.0000   0.00000   0.000  0.0000  0.000000  0.000000
1st Qu.  12.00000   3.0000   0.00000   0.000  0.0000  0.000000  0.000000
Median   34.00000  45.0000   4.00000   8.000  1.0000  0.000000  0.000000
Mean     50.47547 137.9281  18.30589  35.993  6.1552  1.221048  2.863367
3rd Qu.  78.00000 221.0000  26.00000  55.000  9.0000  1.000000  2.000000
Max.    165.00000 716.0000 198.00000 262.000 67.0000 36.000000 73.000000</code></pre>
</div>
</div>
</section>
<section id="custom-functions-with-the-apply-family-anonymouslambda-functions" class="level2">
<h2 class="anchored" data-anchor-id="custom-functions-with-the-apply-family-anonymouslambda-functions">custom functions with the apply family (anonymous/lambda functions)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>custom_batting_summary <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="at">X =</span> my_batting <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a> <span class="at">MARGIN =</span> <span class="dv">2</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a> <span class="at">FUN =</span> <span class="cf">function</span>(x){</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a> temp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">names</span>(temp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a> temp</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>custom_batting_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            G       AB        R        H      X2B      X3B       HR
mean 50.47547 137.9281 18.30589 35.99300 6.155200 1.221048 2.863367
sd   46.77938 183.1120 27.92615 51.95348 9.604293 2.566017 6.391064</code></pre>
</div>
</div>
</section>
<section id="other-arguments-can-be-provided-in-anonymous-functions" class="level2">
<h2 class="anchored" data-anchor-id="other-arguments-can-be-provided-in-anonymous-functions">other arguments can be provided in anonymous functions</h2>
<p>Here, trim = 0.1 is passed as an argument to the anonynmous function through apply</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>custom_batting_summary <span class="ot">&lt;-</span> <span class="fu">apply</span>(<span class="at">X =</span> my_batting <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a> <span class="at">MARGIN =</span> <span class="dv">2</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a> <span class="at">FUN =</span> <span class="cf">function</span>(x, trim){</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a> temp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">mean</span>(x, trim), <span class="fu">sd</span>(x))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">names</span>(temp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(temp)        <span class="co">#can use return or just say temp</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a> },</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a> <span class="at">trim =</span> <span class="fl">0.1</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>custom_batting_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            G       AB        R        H      X2B       X3B       HR
mean 44.43402 103.6474 12.12291 25.27238 4.008490 0.5717342 1.175737
sd   46.77938 183.1120 27.92615 51.95348 9.604293 2.5660168 6.391064</code></pre>
</div>
</div>
</section>
<section id="lapply" class="level2">
<h2 class="anchored" data-anchor-id="lapply">lapply</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate list</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="fu">runif</span>(<span class="dv">10</span>), <span class="fu">rgamma</span>(<span class="dv">40</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">rate =</span> <span class="dv">1</span>))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
  [1]  0.01874617 -0.18425254 -1.37133055 -0.59916772  0.29454513  0.38979430
  [7] -1.20807618 -0.36367602 -1.62667268 -0.25647839  1.10177950  0.75578151
 [13] -0.23823356  0.98744470  0.74139013  0.08934727 -0.95494386 -0.19515038
 [19]  0.92552126  0.48297852 -0.59631064 -2.18528684 -0.67486594 -2.11906119
 [25] -1.26519802 -0.37366156 -0.68755543 -0.87215883 -0.10176101 -0.25378053
 [31] -1.85374045 -0.07794607  0.96856634  0.18492596 -1.37994358 -1.43551436
 [37]  0.36208723 -1.75908675 -0.32454401 -0.65156299  1.08655140 -0.76254488
 [43] -0.82866254  0.83447390 -0.96765199 -0.02881534  0.23252515 -0.30120868
 [49] -0.67761458  0.65522764 -0.40063755 -0.33455657  1.36795395  2.13776710
 [55]  0.50581926  0.78634238 -0.90221194  0.53289699 -0.64589425  0.29098749
 [61] -1.23759447 -0.45617628 -0.83032265  0.34011564  1.06637640  1.21612584
 [67]  0.73569066 -0.48120862  0.56274476 -1.24631971  0.38092221 -1.43042725
 [73] -1.04844550 -0.21850355 -1.48993624  1.17270628 -1.47982702 -0.43038782
 [79] -1.05163864  1.52258634  0.59282805 -0.22266151  0.71289428  0.71660083
 [85]  0.44024186  0.15883062  0.65976414  2.22051966 -1.18394507 -0.07395583
 [91] -0.41635467 -0.19148234  0.06954478  1.15534832  0.59495735 -1.41964511
 [97] -1.60667725  0.89292590  0.14816796  1.22702839

[[2]]
 [1] 0.2230884 0.5358950 0.6625291 0.8480705 0.1491831 0.6700994 0.7616357
 [8] 0.9986345 0.2632973 0.8851860

[[3]]
 [1] 0.97751605 1.07661402 0.53668935 0.30164994 0.31950172 1.50569731
 [7] 1.16219155 1.78190251 1.39846297 0.21755133 0.41221634 0.01073490
[13] 0.19436361 1.97454198 1.65336544 2.67144283 3.83048886 0.41298794
[19] 0.56358677 0.26168819 0.67036627 0.96368153 0.30989614 1.52032718
[25] 2.58631303 0.65429193 0.08615201 0.63838299 1.01594682 2.52592172
[31] 0.30547757 1.31577612 1.02134303 0.18546398 4.16151197 2.45387334
[37] 0.29014960 0.71864545 1.10831509 0.53331983</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> my_list, <span class="at">FUN =</span> mean) <span class="co">#takes mean of each list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1365489

[[2]]
[1] 0.5997619

[[3]]
[1] 1.108209</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> my_list, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1365489

[[2]]
[1] 0.5997619

[[3]]
[1] 1.108209</code></pre>
</div>
</div>
</section>
<section id="can-pass-additional-arguments" class="level2">
<h2 class="anchored" data-anchor-id="can-pass-additional-arguments">can pass additional arguments</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="at">X =</span> my_list, <span class="at">FUN =</span> mean, <span class="at">trim =</span> <span class="fl">0.1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1359629

[[2]]
[1] 0.6062252

[[3]]
[1] 0.9563087</code></pre>
</div>
</div>
</section>
<section id="sapply-simplify-the-result" class="level2">
<h2 class="anchored" data-anchor-id="sapply-simplify-the-result">sapply (simplify the result)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#simplifies list to vector</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="at">X =</span> my_list, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1365489  0.5997619  1.1082087</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(<span class="fu">sapply</span>(<span class="at">X =</span> my_list, <span class="at">FUN =</span> mean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="purrr-a-cleaner-version-of-apply" class="level1">
<h1>purrr, a cleaner version of apply</h1>
<section id="map-is-an-lapply-type-function-so-it-returns-a-list" class="level2">
<h2 class="anchored" data-anchor-id="map-is-an-lapply-type-function-so-it-returns-a-list">map() is an lapply() type function so it returns a list</h2>
<section id="use-map-to-get-means" class="level3">
<h3 class="anchored" data-anchor-id="use-map-to-get-means">use map to get means</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(my_list, mean)  <span class="co">#equivalent to lapply(X = my_list, FUN = mean, trim = 0.1, na.rm = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1365489

[[2]]
[1] 0.5997619

[[3]]
[1] 1.108209</code></pre>
</div>
</div>
</section>
<section id="other-ways-to-use-map" class="level3">
<h3 class="anchored" data-anchor-id="other-ways-to-use-map">other ways to use map</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#grap second element from each list element (see my_list printing)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(my_list, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1842525

[[2]]
[1] 0.535895

[[3]]
[1] 1.076614</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alt code using lapply</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(my_list, <span class="cf">function</span>(x) x[[<span class="dv">2</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1842525

[[2]]
[1] 0.535895

[[3]]
[1] 1.076614</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#OR</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(my_list, <span class="st">'[['</span> , <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.1842525

[[2]]
[1] 0.535895

[[3]]
[1] 1.076614</code></pre>
</div>
</div>
<p>Think of it like this: my_list &lt;- list( list(1, “a”, TRUE), list(2, “b”, FALSE), list(3, “c”, TRUE) ) result &lt;- lapply(my_list, function(x) x[[2]])</p>
<ul>
<li>For the first list list(1, “a”, TRUE), x[[2]] is “a”.</li>
<li>For the second list list(2, “b”, FALSE), x[[2]] is “b”.</li>
<li>For the third list list(3, “c”, TRUE), x[[2]] is “c”.</li>
</ul>
</section>
</section>
<section id="purr-allows-us-to-use-shorthand-ways-to-make-anonymous-functions" class="level2">
<h2 class="anchored" data-anchor-id="purr-allows-us-to-use-shorthand-ways-to-make-anonymous-functions">purr allows us to use shorthand ways to make anonymous functions</h2>
<p>\(x) = function(x), so \(x0) mean(x) = function(x) mean(x)</p>
<p>for example, result &lt;- map(my_list, \(x) mean(x, trim = 0.1))</p>
</section>
</section>
<section id="list-columns" class="level1">
<h1>List columns</h1>
<p>used to add a list to a list, ie iris has 150 observations, can add a column of additional data of 150 observations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">diffs =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a> \(x, y, z, w) <span class="fu">list</span>(x<span class="sc">-</span>y, x<span class="sc">-</span>z, x<span class="sc">-</span>w))) <span class="sc">|&gt;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(diffs, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
   diffs      Sepal.Length Sepal.Width Petal.Length Petal.Width Species
   &lt;list&gt;            &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
 1 &lt;list [3]&gt;          5.1         3.5          1.4         0.2 setosa 
 2 &lt;list [3]&gt;          4.9         3            1.4         0.2 setosa 
 3 &lt;list [3]&gt;          4.7         3.2          1.3         0.2 setosa 
 4 &lt;list [3]&gt;          4.6         3.1          1.5         0.2 setosa 
 5 &lt;list [3]&gt;          5           3.6          1.4         0.2 setosa 
 6 &lt;list [3]&gt;          5.4         3.9          1.7         0.4 setosa 
 7 &lt;list [3]&gt;          4.6         3.4          1.4         0.3 setosa 
 8 &lt;list [3]&gt;          5           3.4          1.5         0.2 setosa 
 9 &lt;list [3]&gt;          4.4         2.9          1.4         0.2 setosa 
10 &lt;list [3]&gt;          4.9         3.1          1.5         0.1 setosa 
# ℹ 140 more rows</code></pre>
</div>
</div>
<p>view the diffs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">diffs =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a> \(x, y, z, w) <span class="fu">list</span>(x<span class="sc">-</span>y, x<span class="sc">-</span>z, x<span class="sc">-</span>w))) <span class="sc">|&gt;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pull</span>(diffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[[1]][[1]]
[1] 1.6

[[1]][[2]]
[1] 3.7

[[1]][[3]]
[1] 4.9


[[2]]
[[2]][[1]]
[1] 1.9

[[2]][[2]]
[1] 3.5

[[2]][[3]]
[1] 4.7


[[3]]
[[3]][[1]]
[1] 1.5

[[3]][[2]]
[1] 3.4

[[3]][[3]]
[1] 4.5


[[4]]
[[4]][[1]]
[1] 1.5

[[4]][[2]]
[1] 3.1

[[4]][[3]]
[1] 4.4


[[5]]
[[5]][[1]]
[1] 1.4

[[5]][[2]]
[1] 3.6

[[5]][[3]]
[1] 4.8


[[6]]
[[6]][[1]]
[1] 1.5

[[6]][[2]]
[1] 3.7

[[6]][[3]]
[1] 5


[[7]]
[[7]][[1]]
[1] 1.2

[[7]][[2]]
[1] 3.2

[[7]][[3]]
[1] 4.3


[[8]]
[[8]][[1]]
[1] 1.6

[[8]][[2]]
[1] 3.5

[[8]][[3]]
[1] 4.8


[[9]]
[[9]][[1]]
[1] 1.5

[[9]][[2]]
[1] 3

[[9]][[3]]
[1] 4.2


[[10]]
[[10]][[1]]
[1] 1.8

[[10]][[2]]
[1] 3.4

[[10]][[3]]
[1] 4.8


[[11]]
[[11]][[1]]
[1] 1.7

[[11]][[2]]
[1] 3.9

[[11]][[3]]
[1] 5.2


[[12]]
[[12]][[1]]
[1] 1.4

[[12]][[2]]
[1] 3.2

[[12]][[3]]
[1] 4.6


[[13]]
[[13]][[1]]
[1] 1.8

[[13]][[2]]
[1] 3.4

[[13]][[3]]
[1] 4.7


[[14]]
[[14]][[1]]
[1] 1.3

[[14]][[2]]
[1] 3.2

[[14]][[3]]
[1] 4.2


[[15]]
[[15]][[1]]
[1] 1.8

[[15]][[2]]
[1] 4.6

[[15]][[3]]
[1] 5.6


[[16]]
[[16]][[1]]
[1] 1.3

[[16]][[2]]
[1] 4.2

[[16]][[3]]
[1] 5.3


[[17]]
[[17]][[1]]
[1] 1.5

[[17]][[2]]
[1] 4.1

[[17]][[3]]
[1] 5


[[18]]
[[18]][[1]]
[1] 1.6

[[18]][[2]]
[1] 3.7

[[18]][[3]]
[1] 4.8


[[19]]
[[19]][[1]]
[1] 1.9

[[19]][[2]]
[1] 4

[[19]][[3]]
[1] 5.4


[[20]]
[[20]][[1]]
[1] 1.3

[[20]][[2]]
[1] 3.6

[[20]][[3]]
[1] 4.8


[[21]]
[[21]][[1]]
[1] 2

[[21]][[2]]
[1] 3.7

[[21]][[3]]
[1] 5.2


[[22]]
[[22]][[1]]
[1] 1.4

[[22]][[2]]
[1] 3.6

[[22]][[3]]
[1] 4.7


[[23]]
[[23]][[1]]
[1] 1

[[23]][[2]]
[1] 3.6

[[23]][[3]]
[1] 4.4


[[24]]
[[24]][[1]]
[1] 1.8

[[24]][[2]]
[1] 3.4

[[24]][[3]]
[1] 4.6


[[25]]
[[25]][[1]]
[1] 1.4

[[25]][[2]]
[1] 2.9

[[25]][[3]]
[1] 4.6


[[26]]
[[26]][[1]]
[1] 2

[[26]][[2]]
[1] 3.4

[[26]][[3]]
[1] 4.8


[[27]]
[[27]][[1]]
[1] 1.6

[[27]][[2]]
[1] 3.4

[[27]][[3]]
[1] 4.6


[[28]]
[[28]][[1]]
[1] 1.7

[[28]][[2]]
[1] 3.7

[[28]][[3]]
[1] 5


[[29]]
[[29]][[1]]
[1] 1.8

[[29]][[2]]
[1] 3.8

[[29]][[3]]
[1] 5


[[30]]
[[30]][[1]]
[1] 1.5

[[30]][[2]]
[1] 3.1

[[30]][[3]]
[1] 4.5


[[31]]
[[31]][[1]]
[1] 1.7

[[31]][[2]]
[1] 3.2

[[31]][[3]]
[1] 4.6


[[32]]
[[32]][[1]]
[1] 2

[[32]][[2]]
[1] 3.9

[[32]][[3]]
[1] 5


[[33]]
[[33]][[1]]
[1] 1.1

[[33]][[2]]
[1] 3.7

[[33]][[3]]
[1] 5.1


[[34]]
[[34]][[1]]
[1] 1.3

[[34]][[2]]
[1] 4.1

[[34]][[3]]
[1] 5.3


[[35]]
[[35]][[1]]
[1] 1.8

[[35]][[2]]
[1] 3.4

[[35]][[3]]
[1] 4.7


[[36]]
[[36]][[1]]
[1] 1.8

[[36]][[2]]
[1] 3.8

[[36]][[3]]
[1] 4.8


[[37]]
[[37]][[1]]
[1] 2

[[37]][[2]]
[1] 4.2

[[37]][[3]]
[1] 5.3


[[38]]
[[38]][[1]]
[1] 1.3

[[38]][[2]]
[1] 3.5

[[38]][[3]]
[1] 4.8


[[39]]
[[39]][[1]]
[1] 1.4

[[39]][[2]]
[1] 3.1

[[39]][[3]]
[1] 4.2


[[40]]
[[40]][[1]]
[1] 1.7

[[40]][[2]]
[1] 3.6

[[40]][[3]]
[1] 4.9


[[41]]
[[41]][[1]]
[1] 1.5

[[41]][[2]]
[1] 3.7

[[41]][[3]]
[1] 4.7


[[42]]
[[42]][[1]]
[1] 2.2

[[42]][[2]]
[1] 3.2

[[42]][[3]]
[1] 4.2


[[43]]
[[43]][[1]]
[1] 1.2

[[43]][[2]]
[1] 3.1

[[43]][[3]]
[1] 4.2


[[44]]
[[44]][[1]]
[1] 1.5

[[44]][[2]]
[1] 3.4

[[44]][[3]]
[1] 4.4


[[45]]
[[45]][[1]]
[1] 1.3

[[45]][[2]]
[1] 3.2

[[45]][[3]]
[1] 4.7


[[46]]
[[46]][[1]]
[1] 1.8

[[46]][[2]]
[1] 3.4

[[46]][[3]]
[1] 4.5


[[47]]
[[47]][[1]]
[1] 1.3

[[47]][[2]]
[1] 3.5

[[47]][[3]]
[1] 4.9


[[48]]
[[48]][[1]]
[1] 1.4

[[48]][[2]]
[1] 3.2

[[48]][[3]]
[1] 4.4


[[49]]
[[49]][[1]]
[1] 1.6

[[49]][[2]]
[1] 3.8

[[49]][[3]]
[1] 5.1


[[50]]
[[50]][[1]]
[1] 1.7

[[50]][[2]]
[1] 3.6

[[50]][[3]]
[1] 4.8


[[51]]
[[51]][[1]]
[1] 3.8

[[51]][[2]]
[1] 2.3

[[51]][[3]]
[1] 5.6


[[52]]
[[52]][[1]]
[1] 3.2

[[52]][[2]]
[1] 1.9

[[52]][[3]]
[1] 4.9


[[53]]
[[53]][[1]]
[1] 3.8

[[53]][[2]]
[1] 2

[[53]][[3]]
[1] 5.4


[[54]]
[[54]][[1]]
[1] 3.2

[[54]][[2]]
[1] 1.5

[[54]][[3]]
[1] 4.2


[[55]]
[[55]][[1]]
[1] 3.7

[[55]][[2]]
[1] 1.9

[[55]][[3]]
[1] 5


[[56]]
[[56]][[1]]
[1] 2.9

[[56]][[2]]
[1] 1.2

[[56]][[3]]
[1] 4.4


[[57]]
[[57]][[1]]
[1] 3

[[57]][[2]]
[1] 1.6

[[57]][[3]]
[1] 4.7


[[58]]
[[58]][[1]]
[1] 2.5

[[58]][[2]]
[1] 1.6

[[58]][[3]]
[1] 3.9


[[59]]
[[59]][[1]]
[1] 3.7

[[59]][[2]]
[1] 2

[[59]][[3]]
[1] 5.3


[[60]]
[[60]][[1]]
[1] 2.5

[[60]][[2]]
[1] 1.3

[[60]][[3]]
[1] 3.8


[[61]]
[[61]][[1]]
[1] 3

[[61]][[2]]
[1] 1.5

[[61]][[3]]
[1] 4


[[62]]
[[62]][[1]]
[1] 2.9

[[62]][[2]]
[1] 1.7

[[62]][[3]]
[1] 4.4


[[63]]
[[63]][[1]]
[1] 3.8

[[63]][[2]]
[1] 2

[[63]][[3]]
[1] 5


[[64]]
[[64]][[1]]
[1] 3.2

[[64]][[2]]
[1] 1.4

[[64]][[3]]
[1] 4.7


[[65]]
[[65]][[1]]
[1] 2.7

[[65]][[2]]
[1] 2

[[65]][[3]]
[1] 4.3


[[66]]
[[66]][[1]]
[1] 3.6

[[66]][[2]]
[1] 2.3

[[66]][[3]]
[1] 5.3


[[67]]
[[67]][[1]]
[1] 2.6

[[67]][[2]]
[1] 1.1

[[67]][[3]]
[1] 4.1


[[68]]
[[68]][[1]]
[1] 3.1

[[68]][[2]]
[1] 1.7

[[68]][[3]]
[1] 4.8


[[69]]
[[69]][[1]]
[1] 4

[[69]][[2]]
[1] 1.7

[[69]][[3]]
[1] 4.7


[[70]]
[[70]][[1]]
[1] 3.1

[[70]][[2]]
[1] 1.7

[[70]][[3]]
[1] 4.5


[[71]]
[[71]][[1]]
[1] 2.7

[[71]][[2]]
[1] 1.1

[[71]][[3]]
[1] 4.1


[[72]]
[[72]][[1]]
[1] 3.3

[[72]][[2]]
[1] 2.1

[[72]][[3]]
[1] 4.8


[[73]]
[[73]][[1]]
[1] 3.8

[[73]][[2]]
[1] 1.4

[[73]][[3]]
[1] 4.8


[[74]]
[[74]][[1]]
[1] 3.3

[[74]][[2]]
[1] 1.4

[[74]][[3]]
[1] 4.9


[[75]]
[[75]][[1]]
[1] 3.5

[[75]][[2]]
[1] 2.1

[[75]][[3]]
[1] 5.1


[[76]]
[[76]][[1]]
[1] 3.6

[[76]][[2]]
[1] 2.2

[[76]][[3]]
[1] 5.2


[[77]]
[[77]][[1]]
[1] 4

[[77]][[2]]
[1] 2

[[77]][[3]]
[1] 5.4


[[78]]
[[78]][[1]]
[1] 3.7

[[78]][[2]]
[1] 1.7

[[78]][[3]]
[1] 5


[[79]]
[[79]][[1]]
[1] 3.1

[[79]][[2]]
[1] 1.5

[[79]][[3]]
[1] 4.5


[[80]]
[[80]][[1]]
[1] 3.1

[[80]][[2]]
[1] 2.2

[[80]][[3]]
[1] 4.7


[[81]]
[[81]][[1]]
[1] 3.1

[[81]][[2]]
[1] 1.7

[[81]][[3]]
[1] 4.4


[[82]]
[[82]][[1]]
[1] 3.1

[[82]][[2]]
[1] 1.8

[[82]][[3]]
[1] 4.5


[[83]]
[[83]][[1]]
[1] 3.1

[[83]][[2]]
[1] 1.9

[[83]][[3]]
[1] 4.6


[[84]]
[[84]][[1]]
[1] 3.3

[[84]][[2]]
[1] 0.9

[[84]][[3]]
[1] 4.4


[[85]]
[[85]][[1]]
[1] 2.4

[[85]][[2]]
[1] 0.9

[[85]][[3]]
[1] 3.9


[[86]]
[[86]][[1]]
[1] 2.6

[[86]][[2]]
[1] 1.5

[[86]][[3]]
[1] 4.4


[[87]]
[[87]][[1]]
[1] 3.6

[[87]][[2]]
[1] 2

[[87]][[3]]
[1] 5.2


[[88]]
[[88]][[1]]
[1] 4

[[88]][[2]]
[1] 1.9

[[88]][[3]]
[1] 5


[[89]]
[[89]][[1]]
[1] 2.6

[[89]][[2]]
[1] 1.5

[[89]][[3]]
[1] 4.3


[[90]]
[[90]][[1]]
[1] 3

[[90]][[2]]
[1] 1.5

[[90]][[3]]
[1] 4.2


[[91]]
[[91]][[1]]
[1] 2.9

[[91]][[2]]
[1] 1.1

[[91]][[3]]
[1] 4.3


[[92]]
[[92]][[1]]
[1] 3.1

[[92]][[2]]
[1] 1.5

[[92]][[3]]
[1] 4.7


[[93]]
[[93]][[1]]
[1] 3.2

[[93]][[2]]
[1] 1.8

[[93]][[3]]
[1] 4.6


[[94]]
[[94]][[1]]
[1] 2.7

[[94]][[2]]
[1] 1.7

[[94]][[3]]
[1] 4


[[95]]
[[95]][[1]]
[1] 2.9

[[95]][[2]]
[1] 1.4

[[95]][[3]]
[1] 4.3


[[96]]
[[96]][[1]]
[1] 2.7

[[96]][[2]]
[1] 1.5

[[96]][[3]]
[1] 4.5


[[97]]
[[97]][[1]]
[1] 2.8

[[97]][[2]]
[1] 1.5

[[97]][[3]]
[1] 4.4


[[98]]
[[98]][[1]]
[1] 3.3

[[98]][[2]]
[1] 1.9

[[98]][[3]]
[1] 4.9


[[99]]
[[99]][[1]]
[1] 2.6

[[99]][[2]]
[1] 2.1

[[99]][[3]]
[1] 4


[[100]]
[[100]][[1]]
[1] 2.9

[[100]][[2]]
[1] 1.6

[[100]][[3]]
[1] 4.4


[[101]]
[[101]][[1]]
[1] 3

[[101]][[2]]
[1] 0.3

[[101]][[3]]
[1] 3.8


[[102]]
[[102]][[1]]
[1] 3.1

[[102]][[2]]
[1] 0.7

[[102]][[3]]
[1] 3.9


[[103]]
[[103]][[1]]
[1] 4.1

[[103]][[2]]
[1] 1.2

[[103]][[3]]
[1] 5


[[104]]
[[104]][[1]]
[1] 3.4

[[104]][[2]]
[1] 0.7

[[104]][[3]]
[1] 4.5


[[105]]
[[105]][[1]]
[1] 3.5

[[105]][[2]]
[1] 0.7

[[105]][[3]]
[1] 4.3


[[106]]
[[106]][[1]]
[1] 4.6

[[106]][[2]]
[1] 1

[[106]][[3]]
[1] 5.5


[[107]]
[[107]][[1]]
[1] 2.4

[[107]][[2]]
[1] 0.4

[[107]][[3]]
[1] 3.2


[[108]]
[[108]][[1]]
[1] 4.4

[[108]][[2]]
[1] 1

[[108]][[3]]
[1] 5.5


[[109]]
[[109]][[1]]
[1] 4.2

[[109]][[2]]
[1] 0.9

[[109]][[3]]
[1] 4.9


[[110]]
[[110]][[1]]
[1] 3.6

[[110]][[2]]
[1] 1.1

[[110]][[3]]
[1] 4.7


[[111]]
[[111]][[1]]
[1] 3.3

[[111]][[2]]
[1] 1.4

[[111]][[3]]
[1] 4.5


[[112]]
[[112]][[1]]
[1] 3.7

[[112]][[2]]
[1] 1.1

[[112]][[3]]
[1] 4.5


[[113]]
[[113]][[1]]
[1] 3.8

[[113]][[2]]
[1] 1.3

[[113]][[3]]
[1] 4.7


[[114]]
[[114]][[1]]
[1] 3.2

[[114]][[2]]
[1] 0.7

[[114]][[3]]
[1] 3.7


[[115]]
[[115]][[1]]
[1] 3

[[115]][[2]]
[1] 0.7

[[115]][[3]]
[1] 3.4


[[116]]
[[116]][[1]]
[1] 3.2

[[116]][[2]]
[1] 1.1

[[116]][[3]]
[1] 4.1


[[117]]
[[117]][[1]]
[1] 3.5

[[117]][[2]]
[1] 1

[[117]][[3]]
[1] 4.7


[[118]]
[[118]][[1]]
[1] 3.9

[[118]][[2]]
[1] 1

[[118]][[3]]
[1] 5.5


[[119]]
[[119]][[1]]
[1] 5.1

[[119]][[2]]
[1] 0.8

[[119]][[3]]
[1] 5.4


[[120]]
[[120]][[1]]
[1] 3.8

[[120]][[2]]
[1] 1

[[120]][[3]]
[1] 4.5


[[121]]
[[121]][[1]]
[1] 3.7

[[121]][[2]]
[1] 1.2

[[121]][[3]]
[1] 4.6


[[122]]
[[122]][[1]]
[1] 2.8

[[122]][[2]]
[1] 0.7

[[122]][[3]]
[1] 3.6


[[123]]
[[123]][[1]]
[1] 4.9

[[123]][[2]]
[1] 1

[[123]][[3]]
[1] 5.7


[[124]]
[[124]][[1]]
[1] 3.6

[[124]][[2]]
[1] 1.4

[[124]][[3]]
[1] 4.5


[[125]]
[[125]][[1]]
[1] 3.4

[[125]][[2]]
[1] 1

[[125]][[3]]
[1] 4.6


[[126]]
[[126]][[1]]
[1] 4

[[126]][[2]]
[1] 1.2

[[126]][[3]]
[1] 5.4


[[127]]
[[127]][[1]]
[1] 3.4

[[127]][[2]]
[1] 1.4

[[127]][[3]]
[1] 4.4


[[128]]
[[128]][[1]]
[1] 3.1

[[128]][[2]]
[1] 1.2

[[128]][[3]]
[1] 4.3


[[129]]
[[129]][[1]]
[1] 3.6

[[129]][[2]]
[1] 0.8

[[129]][[3]]
[1] 4.3


[[130]]
[[130]][[1]]
[1] 4.2

[[130]][[2]]
[1] 1.4

[[130]][[3]]
[1] 5.6


[[131]]
[[131]][[1]]
[1] 4.6

[[131]][[2]]
[1] 1.3

[[131]][[3]]
[1] 5.5


[[132]]
[[132]][[1]]
[1] 4.1

[[132]][[2]]
[1] 1.5

[[132]][[3]]
[1] 5.9


[[133]]
[[133]][[1]]
[1] 3.6

[[133]][[2]]
[1] 0.8

[[133]][[3]]
[1] 4.2


[[134]]
[[134]][[1]]
[1] 3.5

[[134]][[2]]
[1] 1.2

[[134]][[3]]
[1] 4.8


[[135]]
[[135]][[1]]
[1] 3.5

[[135]][[2]]
[1] 0.5

[[135]][[3]]
[1] 4.7


[[136]]
[[136]][[1]]
[1] 4.7

[[136]][[2]]
[1] 1.6

[[136]][[3]]
[1] 5.4


[[137]]
[[137]][[1]]
[1] 2.9

[[137]][[2]]
[1] 0.7

[[137]][[3]]
[1] 3.9


[[138]]
[[138]][[1]]
[1] 3.3

[[138]][[2]]
[1] 0.9

[[138]][[3]]
[1] 4.6


[[139]]
[[139]][[1]]
[1] 3

[[139]][[2]]
[1] 1.2

[[139]][[3]]
[1] 4.2


[[140]]
[[140]][[1]]
[1] 3.8

[[140]][[2]]
[1] 1.5

[[140]][[3]]
[1] 4.8


[[141]]
[[141]][[1]]
[1] 3.6

[[141]][[2]]
[1] 1.1

[[141]][[3]]
[1] 4.3


[[142]]
[[142]][[1]]
[1] 3.8

[[142]][[2]]
[1] 1.8

[[142]][[3]]
[1] 4.6


[[143]]
[[143]][[1]]
[1] 3.1

[[143]][[2]]
[1] 0.7

[[143]][[3]]
[1] 3.9


[[144]]
[[144]][[1]]
[1] 3.6

[[144]][[2]]
[1] 0.9

[[144]][[3]]
[1] 4.5


[[145]]
[[145]][[1]]
[1] 3.4

[[145]][[2]]
[1] 1

[[145]][[3]]
[1] 4.2


[[146]]
[[146]][[1]]
[1] 3.7

[[146]][[2]]
[1] 1.5

[[146]][[3]]
[1] 4.4


[[147]]
[[147]][[1]]
[1] 3.8

[[147]][[2]]
[1] 1.3

[[147]][[3]]
[1] 4.4


[[148]]
[[148]][[1]]
[1] 3.5

[[148]][[2]]
[1] 1.3

[[148]][[3]]
[1] 4.5


[[149]]
[[149]][[1]]
[1] 2.8

[[149]][[2]]
[1] 0.8

[[149]][[3]]
[1] 3.9


[[150]]
[[150]][[1]]
[1] 2.9

[[150]][[2]]
[1] 0.8

[[150]][[3]]
[1] 4.1</code></pre>
</div>
</div>
</section>
<section id="advanced-function-writing" class="level1">
<h1>Advanced Function Writing</h1>
<section id="unnamed-arguments" class="level2">
<h2 class="anchored" data-anchor-id="unnamed-arguments">Unnamed arguments</h2>
<section id="recall-standardize-function" class="level3">
<h3 class="anchored" data-anchor-id="recall-standardize-function">Recall standardize function</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>standardize <span class="ot">&lt;-</span> <span class="cf">function</span>(vector, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a> mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(vector)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a> stdev <span class="ot">&lt;-</span> <span class="fu">sd</span>(vector)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> (center) {</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a> vector <span class="ot">&lt;-</span> vector <span class="sc">-</span> mean</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> (scale) {</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a> vector <span class="ot">&lt;-</span> vector <span class="sc">/</span> stdev</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">result =</span> vector, <span class="at">mean =</span> mean, <span class="at">sd =</span> stdev))</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>sd() and mean() have as defaults na.rm = FALSE, so if there are NAs, the standardize function will return an error</li>
<li>can use … so na.rm can be changed however desired</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>standardize <span class="ot">&lt;-</span> <span class="cf">function</span>(vector, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>, ...) {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a> mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(vector, ...)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a> stdev <span class="ot">&lt;-</span> <span class="fu">sd</span>(vector, ...)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> (center) {</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a> vector <span class="ot">&lt;-</span> vector <span class="sc">-</span> mean</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> (scale) {</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a> vector <span class="ot">&lt;-</span> vector <span class="sc">/</span> stdev</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">result =</span> vector, <span class="at">mean =</span> mean, <span class="at">sd =</span> stdev))</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>standard_Ozone <span class="ot">&lt;-</span> <span class="fu">standardize</span>(airquality<span class="sc">$</span>Ozone, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>standard_Ozone<span class="sc">$</span>mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42.12931</code></pre>
</div>
</div>
</section>
</section>
<section id="function-to-find-group-means" class="level2">
<h2 class="anchored" data-anchor-id="function-to-find-group-means">function to find group means</h2>
<section id="one-group-using-enquo" class="level3">
<h3 class="anchored" data-anchor-id="one-group-using-enquo">one group using enquo</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rlang'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:purrr':

    %@%, flatten, flatten_chr, flatten_dbl, flatten_int, flatten_lgl,
    flatten_raw, invoke, splice</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>find_group_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(.df, group){ </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  group_name <span class="ot">&lt;-</span> <span class="fu">enquo</span>(group)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  .df <span class="sc">|&gt;</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span>group_name) <span class="sc">|&gt;</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">list</span>(<span class="st">"mean"</span> <span class="ot">=</span> mean), </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.names =</span> <span class="st">"{.fn}_{.col}"</span>))</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="fu">find_group_mean</span>(iris, Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  Species  mean_Sepal.Length mean_Sepal.Width mean_Petal.Length mean_Petal.Width
  &lt;fct&gt;                &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;
1 setosa                5.01             3.43              1.46            0.246
2 versico…              5.94             2.77              4.26            1.33 
3 virgini…              6.59             2.97              5.55            2.03 </code></pre>
</div>
</div>
</section>
<section id="one-group-using" class="level3">
<h3 class="anchored" data-anchor-id="one-group-using">one group using {{}}</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>find_group_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(.df, group){ </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  .df <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>({{group}}) <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">list</span>(<span class="st">"mean"</span> <span class="ot">=</span> mean), </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.names =</span> <span class="st">"{.fn}_{.col}"</span>))</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">find_group_mean</span>(iris, Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  Species  mean_Sepal.Length mean_Sepal.Width mean_Petal.Length mean_Petal.Width
  &lt;fct&gt;                &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;
1 setosa                5.01             3.43              1.46            0.246
2 versico…              5.94             2.77              4.26            1.33 
3 virgini…              6.59             2.97              5.55            2.03 </code></pre>
</div>
</div>
</section>
<section id="more-than-one-group-using-quos" class="level3">
<h3 class="anchored" data-anchor-id="more-than-one-group-using-quos">more than one group using quos</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>find_group_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(.df, ...){ </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  group_vars <span class="ot">&lt;-</span> <span class="fu">quos</span>(...)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  .df <span class="sc">|&gt;</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!!</span>group_vars) <span class="sc">|&gt;</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">list</span>(<span class="st">"mean"</span> <span class="ot">=</span> mean), </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">.names =</span> <span class="st">"{.fn}_{.col}"</span>))</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="fu">find_group_mean</span>(CO2, Type, Treatment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Type'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   Type [2]
  Type        Treatment  mean_conc mean_uptake
  &lt;fct&gt;       &lt;fct&gt;          &lt;dbl&gt;       &lt;dbl&gt;
1 Quebec      nonchilled       435        35.3
2 Quebec      chilled          435        31.8
3 Mississippi nonchilled       435        26.0
4 Mississippi chilled          435        15.8</code></pre>
</div>
</div>
</section>
</section>
<section id="as_label-for-tidyverse-style-functions" class="level2">
<h2 class="anchored" data-anchor-id="as_label-for-tidyverse-style-functions">as_label for tidyverse style functions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>find_group_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(.df, group, column){ </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  group_name <span class="ot">&lt;-</span> <span class="fu">enquo</span>(group)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  column_name <span class="ot">&lt;-</span> <span class="fu">enquo</span>(column)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  column_label <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"mean_"</span>, <span class="fu">as_label</span>(column_name))</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  .df <span class="sc">|&gt;</span> </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span>group_name) <span class="sc">|&gt;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="sc">!!</span>(column_label) <span class="sc">:</span><span class="er">=</span> <span class="fu">mean</span>(<span class="sc">!!</span>column_name))</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">find_group_mean</span>(iris, Species, Sepal.Length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Species    mean_Sepal.Length
  &lt;fct&gt;                  &lt;dbl&gt;
1 setosa                  5.01
2 versicolor              5.94
3 virginica               6.59</code></pre>
</div>
</div>
</section>
<section id="pipeable-functions" class="level2">
<h2 class="anchored" data-anchor-id="pipeable-functions">Pipeable Functions</h2>
<p>Below need invisible(.df) because you can’t pipe number of observations into summarize, the data is no longer accessible. invisible() returns data frame so you can keep using it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>print_num_obs <span class="ot">&lt;-</span> <span class="cf">function</span>(.df) {</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">cat</span>(<span class="st">"The number of observations in the data set is "</span>, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">nrow</span>(.df), </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>     <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">sep =</span> <span class="st">""</span>) </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">invisible</span>(.df)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">print_num_obs</span>() <span class="sc">|&gt;</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Sepal.Length))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The number of observations in the data set is 150</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      mean
1 5.843333</code></pre>
</div>
</div>
</section>
</section>
<section id="querying-apis" class="level1">
<h1>Querying APIs</h1>
<p>API: Application Programming Interface, a communication protocol for 2 computers or 2 softwares communication</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>rent <span class="ot">&lt;-</span> <span class="st">"DP04_0142PE"</span> <span class="co">#PE means percentage</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>rent_data <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">variables =</span> rent, </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geography =</span> <span class="st">"county"</span>, </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometry =</span> <span class="cn">TRUE</span>, <span class="co">#returns the polygon data and allows for maps easily</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">survey =</span> <span class="st">"acs5"</span>,</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">show_call =</span> <span class="cn">TRUE</span>) <span class="co">#can add state and other things</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Getting data from the 2018-2022 5-year ACS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: • You have not set a Census API key. Users without a key are limited to 500
queries per day and may experience performance limitations.
ℹ For best results, get a Census API key at
http://api.census.gov/data/key_signup.html and then supply the key to the
`census_api_key()` function to use it throughout your tidycensus session.
This warning is displayed once per session.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Downloading feature geometry from the Census website.  To cache shapefiles for use in future sessions, set `options(tigris_use_cache = TRUE)`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using the ACS Data Profile</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Census API call: https://api.census.gov/data/2022/acs/acs5/profile?get=DP04_0142PE%2CDP04_0142PM%2CNAME&amp;for=county%3A%2A</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |                                                                      |   1%
  |                                                                            
  |=                                                                     |   1%
  |                                                                            
  |=                                                                     |   2%
  |                                                                            
  |==                                                                    |   2%
  |                                                                            
  |==                                                                    |   3%
  |                                                                            
  |===                                                                   |   4%
  |                                                                            
  |===                                                                   |   5%
  |                                                                            
  |====                                                                  |   5%
  |                                                                            
  |====                                                                  |   6%
  |                                                                            
  |=====                                                                 |   6%
  |                                                                            
  |=====                                                                 |   7%
  |                                                                            
  |=====                                                                 |   8%
  |                                                                            
  |======                                                                |   8%
  |                                                                            
  |======                                                                |   9%
  |                                                                            
  |=======                                                               |   9%
  |                                                                            
  |=======                                                               |  10%
  |                                                                            
  |=======                                                               |  11%
  |                                                                            
  |========                                                              |  11%
  |                                                                            
  |========                                                              |  12%
  |                                                                            
  |=========                                                             |  12%
  |                                                                            
  |=========                                                             |  13%
  |                                                                            
  |==========                                                            |  14%
  |                                                                            
  |==========                                                            |  15%
  |                                                                            
  |===========                                                           |  15%
  |                                                                            
  |===========                                                           |  16%
  |                                                                            
  |============                                                          |  17%
  |                                                                            
  |============                                                          |  18%
  |                                                                            
  |=============                                                         |  18%
  |                                                                            
  |=============                                                         |  19%
  |                                                                            
  |==============                                                        |  19%
  |                                                                            
  |==============                                                        |  20%
  |                                                                            
  |==============                                                        |  21%
  |                                                                            
  |===============                                                       |  21%
  |                                                                            
  |===============                                                       |  22%
  |                                                                            
  |================                                                      |  22%
  |                                                                            
  |================                                                      |  23%
  |                                                                            
  |================                                                      |  24%
  |                                                                            
  |=================                                                     |  24%
  |                                                                            
  |=================                                                     |  25%
  |                                                                            
  |==================                                                    |  26%
  |                                                                            
  |===================                                                   |  27%
  |                                                                            
  |===================                                                   |  28%
  |                                                                            
  |====================                                                  |  28%
  |                                                                            
  |====================                                                  |  29%
  |                                                                            
  |=====================                                                 |  30%
  |                                                                            
  |======================                                                |  31%
  |                                                                            
  |======================                                                |  32%
  |                                                                            
  |=======================                                               |  32%
  |                                                                            
  |=======================                                               |  33%
  |                                                                            
  |=======================                                               |  34%
  |                                                                            
  |========================                                              |  34%
  |                                                                            
  |========================                                              |  35%
  |                                                                            
  |=========================                                             |  35%
  |                                                                            
  |=========================                                             |  36%
  |                                                                            
  |==========================                                            |  37%
  |                                                                            
  |==========================                                            |  38%
  |                                                                            
  |===========================                                           |  38%
  |                                                                            
  |===========================                                           |  39%
  |                                                                            
  |============================                                          |  39%
  |                                                                            
  |============================                                          |  40%
  |                                                                            
  |=============================                                         |  41%
  |                                                                            
  |=============================                                         |  42%
  |                                                                            
  |==============================                                        |  42%
  |                                                                            
  |==============================                                        |  43%
  |                                                                            
  |===============================                                       |  44%
  |                                                                            
  |===============================                                       |  45%
  |                                                                            
  |================================                                      |  45%
  |                                                                            
  |================================                                      |  46%
  |                                                                            
  |=================================                                     |  47%
  |                                                                            
  |=================================                                     |  48%
  |                                                                            
  |==================================                                    |  48%
  |                                                                            
  |==================================                                    |  49%
  |                                                                            
  |===================================                                   |  49%
  |                                                                            
  |====================================                                  |  51%
  |                                                                            
  |====================================                                  |  52%
  |                                                                            
  |=====================================                                 |  52%
  |                                                                            
  |=====================================                                 |  53%
  |                                                                            
  |=====================================                                 |  54%
  |                                                                            
  |======================================                                |  54%
  |                                                                            
  |======================================                                |  55%
  |                                                                            
  |=======================================                               |  55%
  |                                                                            
  |=======================================                               |  56%
  |                                                                            
  |========================================                              |  58%
  |                                                                            
  |=========================================                             |  58%
  |                                                                            
  |=========================================                             |  59%
  |                                                                            
  |==========================================                            |  59%
  |                                                                            
  |==========================================                            |  60%
  |                                                                            
  |==========================================                            |  61%
  |                                                                            
  |===========================================                           |  61%
  |                                                                            
  |===========================================                           |  62%
  |                                                                            
  |============================================                          |  62%
  |                                                                            
  |============================================                          |  63%
  |                                                                            
  |=============================================                         |  64%
  |                                                                            
  |=============================================                         |  65%
  |                                                                            
  |==============================================                        |  65%
  |                                                                            
  |==============================================                        |  66%
  |                                                                            
  |===============================================                       |  67%
  |                                                                            
  |===============================================                       |  68%
  |                                                                            
  |================================================                      |  68%
  |                                                                            
  |================================================                      |  69%
  |                                                                            
  |=================================================                     |  69%
  |                                                                            
  |=================================================                     |  70%
  |                                                                            
  |==================================================                    |  71%
  |                                                                            
  |==================================================                    |  72%
  |                                                                            
  |====================================================                  |  74%
  |                                                                            
  |====================================================                  |  75%
  |                                                                            
  |=====================================================                 |  76%
  |                                                                            
  |======================================================                |  77%
  |                                                                            
  |======================================================                |  78%
  |                                                                            
  |=======================================================               |  78%
  |                                                                            
  |=======================================================               |  79%
  |                                                                            
  |========================================================              |  79%
  |                                                                            
  |========================================================              |  80%
  |                                                                            
  |========================================================              |  81%
  |                                                                            
  |=========================================================             |  81%
  |                                                                            
  |===========================================================           |  84%
  |                                                                            
  |===========================================================           |  85%
  |                                                                            
  |============================================================          |  86%
  |                                                                            
  |==============================================================        |  88%
  |                                                                            
  |==============================================================        |  89%
  |                                                                            
  |===============================================================       |  90%
  |                                                                            
  |===============================================================       |  91%
  |                                                                            
  |================================================================      |  91%
  |                                                                            
  |================================================================      |  92%
  |                                                                            
  |=================================================================     |  92%
  |                                                                            
  |=================================================================     |  93%
  |                                                                            
  |===================================================================   |  95%
  |                                                                            
  |===================================================================   |  96%
  |                                                                            
  |====================================================================  |  97%
  |                                                                            
  |===================================================================== |  98%
  |                                                                            
  |===================================================================== |  99%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>rent_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3222 features and 5 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -179.1467 ymin: 17.88328 xmax: 179.7785 ymax: 71.38782
Geodetic CRS:  NAD83
First 10 features:
   GEOID                           NAME   variable estimate  moe
1  01069        Houston County, Alabama DP04_0142P     36.5  2.2
2  01023        Choctaw County, Alabama DP04_0142P     37.8 13.2
3  01005        Barbour County, Alabama DP04_0142P     35.9  7.7
4  01107        Pickens County, Alabama DP04_0142P     35.5  8.6
5  01033        Colbert County, Alabama DP04_0142P     37.0  5.0
6  04012         La Paz County, Arizona DP04_0142P     20.1  6.3
7  04001         Apache County, Arizona DP04_0142P     17.8  4.2
8  05081  Little River County, Arkansas DP04_0142P     22.8 12.1
9  05121      Randolph County, Arkansas DP04_0142P     26.1  8.0
10 06037 Los Angeles County, California DP04_0142P     47.9  0.4
                         geometry
1  MULTIPOLYGON (((-85.71209 3...
2  MULTIPOLYGON (((-88.47323 3...
3  MULTIPOLYGON (((-85.74803 3...
4  MULTIPOLYGON (((-88.34043 3...
5  MULTIPOLYGON (((-88.13925 3...
6  MULTIPOLYGON (((-114.7312 3...
7  MULTIPOLYGON (((-110.0007 3...
8  MULTIPOLYGON (((-94.48558 3...
9  MULTIPOLYGON (((-91.40687 3...
10 MULTIPOLYGON (((-118.6044 3...</code></pre>
</div>
</div>
<section id="a-plot" class="level2">
<h2 class="anchored" data-anchor-id="a-plot">a plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install mapview</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.3.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> rent_data <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  mapview<span class="sc">::</span><span class="fu">mapview</span>(<span class="at">zcol =</span> <span class="st">"estimate"</span>, </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">layer.name =</span> <span class="st">"Median rent as a % of gross income"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-our-own-api" class="level2">
<h2 class="anchored" data-anchor-id="build-our-own-api">build our own API</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>URL_ids <span class="ot">&lt;-</span> <span class="st">"https://api.nhle.com/stats/rest/en/team"</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>id_info <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(URL_ids)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(id_info, <span class="at">max.level =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 10
 $ url        : chr "https://api.nhle.com/stats/rest/en/team"
 $ status_code: int 200
 $ headers    :List of 10
  ..- attr(*, "class")= chr [1:2] "insensitive" "list"
 $ all_headers:List of 1
 $ cookies    :'data.frame':    0 obs. of  7 variables:
 $ content    : raw [1:6561] 7b 22 64 61 ...
 $ date       : POSIXct[1:1], format: "2024-06-24 19:52:50"
 $ times      : Named num [1:6] 0 0.0273 0.0636 0.1057 0.1982 ...
  ..- attr(*, "names")= chr [1:6] "redirect" "namelookup" "connect" "pretransfer" ...
 $ request    :List of 7
  ..- attr(*, "class")= chr "request"
 $ handle     :Class 'curl_handle' &lt;externalptr&gt; 
 - attr(*, "class")= chr "response"</code></pre>
</div>
</div>
</section>
<section id="parse-the-data" class="level2">
<h2 class="anchored" data-anchor-id="parse-the-data">parse the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:rlang':

    flatten, unbox</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>parsed <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(id_info<span class="sc">$</span>content))</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
   id franchiseId                fullName leagueId rawTricode triCode
1  11          35       Atlanta Thrashers      133        ATL     ATL
2  34          26        Hartford Whalers      133        HFD     HFD
3  31          15   Minnesota North Stars      133        MNS     MNS
4  32          27        Quebec Nordiques      133        QUE     QUE
5  33          28    Winnipeg Jets (1979)      133        WIN     WIN
6  35          23        Colorado Rockies      133        CLR     CLR
7  36           3  Ottawa Senators (1917)      133        SEN     SEN
8  37           4         Hamilton Tigers      133        HAM     HAM
9  38           9      Pittsburgh Pirates      133        PIR     PIR
10 39           9    Philadelphia Quakers      133        QUA     QUA
11 40          12         Detroit Cougars      133        DCG     DCG
12 41           2      Montreal Wanderers      133        MWN     MWN
13 42           4         Quebec Bulldogs      133        QBD     QBD
14 43           7        Montreal Maroons      133        MMR     MMR
15 44           8      New York Americans      133        NYA     NYA
16 45           3        St. Louis Eagles      133        SLE     SLE
17 46          13           Oakland Seals      133        OAK     OAK
18 47          21          Atlanta Flames      133        AFM     AFM
19 48          23      Kansas City Scouts      133        KCS     KCS
20 49          13        Cleveland Barons      133        CLE     CLE
21 50          12         Detroit Falcons      133        DFL     DFL
22 51           8      Brooklyn Americans      133        BRK     BRK
23 56          13 California Golden Seals      133        CGS     CGS
24 57           5          Toronto Arenas      133        TAN     TAN
25 58           5    Toronto St. Patricks      133        TSP     TSP
26 99          NA                     NHL      133        NHL     NHL
27 17          12       Detroit Red Wings      133        DET     DET
28  6           6           Boston Bruins      133        BOS     BOS
29  5          17     Pittsburgh Penguins      133        PIT     PIT
30 14          31     Tampa Bay Lightning      133        TBL     TBL
31  4          16     Philadelphia Flyers      133        PHI     PHI
32 12          26     Carolina Hurricanes      133        CAR     CAR
33 20          21          Calgary Flames      133        CGY     CGY
34  8           1      Montréal Canadiens      133        MTL     MTL
35 15          24     Washington Capitals      133        WSH     WSH
36 23          20       Vancouver Canucks      133        VAN     VAN
37 21          27      Colorado Avalanche      133        COL     COL
38 18          34     Nashville Predators      133        NSH     NSH
39 24          32           Anaheim Ducks      133        ANA     ANA
40 54          38    Vegas Golden Knights      133        VGK     VGK
41 25          15            Dallas Stars      133        DAL     DAL
42 27          28         Phoenix Coyotes      133        PHX     PHX
43 16          11      Chicago Blackhawks      133        CHI     CHI
44  3          10        New York Rangers      133        NYR     NYR
45 13          33        Florida Panthers      133        FLA     FLA
46 22          25         Edmonton Oilers      133        EDM     EDM
47 30          37          Minnesota Wild      133        MIN     MIN
48 19          18         St. Louis Blues      133        STL     STL
49  2          22      New York Islanders      133        NYI     NYI
50 26          14       Los Angeles Kings      133        LAK     LAK
51 70          NA        To be determined      133        TBD     TBD
52  7          19          Buffalo Sabres      133        BUF     BUF
53  9          30         Ottawa Senators      133        OTT     OTT
54 10           5     Toronto Maple Leafs      133        TOR     TOR
55  1          23       New Jersey Devils      133        NJD     NJD
56 52          35           Winnipeg Jets      133        WPG     WPG
57 55          39          Seattle Kraken      133        SEA     SEA
58 28          29         San Jose Sharks      133        SJS     SJS
59 53          28         Arizona Coyotes      133        ARI     ARI
60 59          40        Utah Hockey Club      133        UTA     UTA
61 29          36   Columbus Blue Jackets      133        CBJ     CBJ

$total
[1] 61</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>team_info <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(parsed<span class="sc">$</span>data)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>team_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 61 × 6
      id franchiseId fullName               leagueId rawTricode triCode
   &lt;int&gt;       &lt;int&gt; &lt;chr&gt;                     &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;  
 1    11          35 Atlanta Thrashers           133 ATL        ATL    
 2    34          26 Hartford Whalers            133 HFD        HFD    
 3    31          15 Minnesota North Stars       133 MNS        MNS    
 4    32          27 Quebec Nordiques            133 QUE        QUE    
 5    33          28 Winnipeg Jets (1979)        133 WIN        WIN    
 6    35          23 Colorado Rockies            133 CLR        CLR    
 7    36           3 Ottawa Senators (1917)      133 SEN        SEN    
 8    37           4 Hamilton Tigers             133 HAM        HAM    
 9    38           9 Pittsburgh Pirates          133 PIR        PIR    
10    39           9 Philadelphia Quakers        133 QUA        QUA    
# ℹ 51 more rows</code></pre>
</div>
</div>
</section>
<section id="another-example" class="level2">
<h2 class="anchored" data-anchor-id="another-example">another example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>URL_team_stats <span class="ot">&lt;-</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="st">"https://api.nhle.com/stats/rest/en/team/summary?sort=wins&amp;cayenneExp=seasonId=20232024%20and%20gameTypeId=2"</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>team_stats_return <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(URL_team_stats)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>parsed_team_stats <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">rawToChar</span>(team_stats_return<span class="sc">$</span>content))</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>team_stats <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(parsed_team_stats<span class="sc">$</span>data)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>team_stats <span class="sc">|&gt;</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(teamId, teamFullName, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 24
   teamId teamFullName          faceoffWinPct gamesPlayed goalsAgainst
    &lt;int&gt; &lt;chr&gt;                         &lt;dbl&gt;       &lt;int&gt;        &lt;int&gt;
 1     28 San Jose Sharks               0.490          82          326
 2     16 Chicago Blackhawks            0.463          82          289
 3     29 Columbus Blue Jackets         0.472          82          298
 4     24 Anaheim Ducks                 0.466          82          293
 5      8 Montréal Canadiens            0.515          82          281
 6     55 Seattle Kraken                0.475          82          232
 7     53 Arizona Coyotes               0.451          82          274
 8      9 Ottawa Senators               0.510          82          281
 9     20 Calgary Flames                0.496          82          267
10      1 New Jersey Devils             0.535          82          281
# ℹ 22 more rows
# ℹ 19 more variables: goalsAgainstPerGame &lt;dbl&gt;, goalsFor &lt;int&gt;,
#   goalsForPerGame &lt;dbl&gt;, losses &lt;int&gt;, otLosses &lt;int&gt;,
#   penaltyKillNetPct &lt;dbl&gt;, penaltyKillPct &lt;dbl&gt;, pointPct &lt;dbl&gt;,
#   points &lt;int&gt;, powerPlayNetPct &lt;dbl&gt;, powerPlayPct &lt;dbl&gt;,
#   regulationAndOtWins &lt;int&gt;, seasonId &lt;int&gt;, shotsAgainstPerGame &lt;dbl&gt;,
#   shotsForPerGame &lt;dbl&gt;, ties &lt;lgl&gt;, wins &lt;int&gt;, winsInRegulation &lt;int&gt;, …</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>